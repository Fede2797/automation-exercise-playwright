# Automation testing exercise

This is a personal project to improve my understanding of Playwright tools. I'll cover how it works and everything I learned during this project.


- [Introduction](#introduction-heading)
- [Demonstration](#second-heading)
- [Requirements](#third-heading)
- [Instructions](#forth-heading)
- [What I learned](#fifth-heading)
 
<a id="introduction-heading"></a>
# Introduction

Based on the excercise of the following website https://automationexercise.com/ I built a test suite to assure its quality and learn about Playwright. 

You can find every pre-built test case provided by the web in https://automationexercise.com/test_cases.

Inside the repository, you can find all the tests inside the "/tests" folder. They are divided according each tested sections of the website.

<a id="second-heading"></a>
# Demonstration

In this section, you can see demonstrations of our automated tests in action.

This is a gif of a subset of tests is being executed headless. It's set to handle up to 4 workers, so as soon as any of the workers is freed it continues with the execution of the following test.
![Execution gif](img/execution-gif.gif)

Here you can see the execution of a headed end to end test. What you are seeing is every move Playwright does on real time.
![Headed execution gif](img/headed-execution.gif)

And here is shown the results of the execution of every single test in the project. Every test is set to run on chromium and firefox.
![Total execution results](img/total-execution-results.png)


<a id="third-heading"></a>
# Requirements

To execute the tests you need to have [Node.js](https://nodejs.org/es) (v18.16.1 is currently working) installed on your machine.

Then install Playwright (v1.37.1 is currently working)
```
npx playwright install
```

Once you have Node.js and Playwright installed, clone or download this repository and you're ready to go.

```
git clone https://github.com/Fede2797/automation-exercise-playwright.git 
```

<a id="forth-heading"></a>
# Instructions

Before running any tests, it is necessary to install the project's dependencies. 

To do so open your terminal, head down to the project's directory and run:

```
npm install
```

### Then, you can run every test with simple commands:

This instruction runs every test of the project in headless mode
```
npx playwright test tests/
```

This instruction runs every test of the project headed
```
npx playwright test tests/ --headed
```

Or you can choose to run a single file like this:
```
npx playwright test tests/cart.spec.ts
```

<a id="fifth-heading"></a>
# What I learned

### Data Driven Testing
>Data-driven testing (DDT) is data that is external to your functional tests, and is loaded and used to extend your automated test cases. You can take the same test case and run it with as many different inputs as you like, thus getting better coverage from a single test.

I decided to try out this method in our authentication testing. Basically, I put together sets of different input data for the sign-up and sign-in test scripts. Then, I created scripts that could use this data and run each test case separately, taking full advantage of Playwright's ability to run tests in parallel. 

![Code extract - Data Driven Test](img/data-driven.png)

### Ad handling
The ad handling part was quite challenging. This website displays various types of ads in each section, which required me to create a script capable of recognizing which ad appeared at any given moment and taking the necessary action to manage it. 

![Code extract - Ad Handling](img/ad-handling.png)

Usually, websites use iframes to embed HTML documents within the current site to display ads, and Playwright has this really useful tool to access the view from iframes inside the website "frameLocator".

### Upload files
Playwright has a very straight forward way to upload images. With just one line of code I was able to upload an image.

![Code extract - Upload files](img/upload-files.png)

### HTML Reports and Trace Viewer
When it comes to identifying errors, both during the creation of tests and when running them, using HTML reports is highly beneficial. In the event of a test failure, the report records the cause of the failure, along with the specific line of code that couldn't be executed or the condition that wasn't met.

![Report failing](img/report-fail.png)

Another very useful tool is the Trace Viewer. This tool allows us to explore the traces generated by Playwright after executing the script. It's especially valuable for detecting the presence of pop-ups, ads, or any other elements that might block access to the element we're trying to locate.

![Trace report failing](img/report-fail2.png)
